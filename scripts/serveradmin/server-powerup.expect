#!/usr/bin/expect -f

# serveraction: 
#
# powerdown       - power server off
# powerup         - power server on
# powercycle      - perform server power cycle
# hardreset       - force hard server power reset
# powerstatus     - display current power status of server

set timeout -1
set password "xxxxxxx"

spawn ssh root@[lindex $argv 0]

expect "password*"
send "$password\r"

expect "$*"
send "racadm serveraction powerup\r"

expect "$*"
send "exit\r"

expect eof
exit
